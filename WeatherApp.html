<!DOCTYPE html>
<html>
<head>
	<title>Weather App</title>
<style>
	body{
		background-image: url("Clear.jpg");
		background-size: cover;
		background-position: center center;
		background-repeat: no-repeat;
		image-rendering: pixelated;
		transition: background-image 3s ease-in-out;
	}
	.container {
		background-color: rgba(255,255,255,.25);
		position: relative;
		width: 50%;
		left: 50%;
		transform: translate(-50%);
		text-align:center;
		font-size: 2em;
		top: 15px;
		color: black
	}
</style>
</head>
<body>
	<div class="container">
        <h1>Weather App</h1>
        <input type="text" id="locationInput" placeholder="Enter a city">
        <button id="searchButton" onclick = "fetchWeather()">Search</button>
        <div class="weather-info">
           	<h2 id="location"></h2>
           	<p id="temperature"></p>
            	<p id="description"></p>
		<br>
		<h3>Other Info</h3>
		<p id="minTemp"></p>
		<p id="maxTemp"></p>
		<p id="humidity"></p>
		<p id="sunrise"></p>
		<p id="sunset"></p>
        </div>
    </div>
</body>
<script>
	// https://api.openweathermap.org/data/2.5/weather?q=Atlanta&appid=34d38878aa95ce19e71e8d7f39755a25&units=imperial
	const apiKey = '34d38878aa95ce19e71e8d7f39755a25';
	const apiUrl = 'https://api.openweathermap.org/data/2.5/weather';

	const locationInput = document.getElementById('locationInput');
	const searchButton = document.getElementById('searchButton');
	const locationElement = document.getElementById('location');
	const temperatureElement = document.getElementById('temperature');
	const descriptionElement = document.getElementById('description');
	const minTemp = document.getElementById('minTemp');
	const maxTemp = document.getElementById('maxTemp');
	const humidity = document.getElementById('humidity');
	const sunrise = document.getElementById('sunrise');
	const sunset = document.getElementById('sunset');

	searchButton.addEventListener('click', () => {
   		const location = locationInput.value;
   		if (location) {
        	fetchWeather(location);
    		}
	});

	function fetchWeather(location) {
	    const url = `${apiUrl}?q=${location}&appid=${apiKey}&units=imperial`;

	    fetch(url)
	       .then(response => response.json())
 	       .then(data => {
 	           	locationElement.textContent = data.name;
 	          	temperatureElement.textContent = `Current Temperature: ${Math.round(data.main.temp)} Â°F`;
 	           	const weatherDescription = data.weather[0].description;
			const capitalizedDescription = weatherDescription.split(' ').map(word => {
  			return word.charAt(0).toUpperCase() + word.slice(1);
			}).join(' ');
			descriptionElement.textContent = capitalizedDescription;
			minTemp.textContent = `Min Temperature: ${data.main.temp_min}`;
			maxTemp.textContent = `Max Temperature: ${data.main.temp_max}`;
			humidity.textContent = `Humidity: ${data.main.humidity}%`;

			const sunriseData = new Date(data.sys.sunrise*1000);
			const riseHour = sunriseData.getHours();
			const riseMinute = sunriseData.getMinutes();
			const riseSeconds = sunriseData.getSeconds();
			const riseTime = `${riseHour}:${riseMinute}:${riseSeconds}`;
			sunrise.textContent = `Sunrise: ${riseTime} A.M.`;

			const sunsetData = new Date(data.sys.sunset*1000);
			const setHour = sunsetData.getHours();
			const setMinute = sunsetData.getMinutes();
			const setSeconds = sunsetData.getSeconds();
			const setTime = `${setHour}:${setMinute}:${setSeconds}`;
			sunset.textContent = `Sunset: ${setTime} P.M.`;
console.log(riseTime, setTime);

		if (weatherDescription.includes("clouds"))  {
			document.body.style.backgroundImage = "url('Clouds.jpg')";
		} else if (weatherDescription.includes("clear")) {
			document.body.style.backgroundImage = "url('Clear.jpg')";
		} else if (weatherDescription.includes("storm")) {
			document.body.style.backgroundImage = "url('Storm.jpg')";
		} else if ((weatherDescription.includes("rain")) ||  (weatherDescription.includes("drizzle"))){
			document.body.style.backgroundImage = "url('Rain.jpg')";
		} else if ((weatherDescription.includes("fog")) ||  (weatherDescription.includes("mist"))){
			document.body.style.backgroundImage = "url('Fog.jpg')";
		} else if (weatherDescription.includes("snow")) {
			document.body.style.backgroundImage = "url('Snow.jpg')";
		}		
		})
	        .catch(error => {
	            console.error('Error fetching weather data:', error);
	        });
	}
</script>
</html>
